<div class="main">
  <div class="league-table">
    <h2 class="league-table-title">【リーグ表】<span class="detail">※勝利のマス目をクリック 間違えたら再クリックで取消</span></h2>
    <table id="winorlose_table" border="2" bordercolor="black" style="border-collapse: collapse">
      <tr class="top-title">
        <th class="player-title">対局者</th>

        <% @members.each do |member| %>
        <td class="opponent-name"><%= member.name %></td>
        <% end %>

        <th class="win-count-title">勝</th>
        <th class="lose-count-title">負</th>
      </tr>

      <% @members.each_with_index do |member, i| %>
      <tr class="result-cells">
        <td class="self-name"><%= member.name %></td>
        
        <%# 11人 %>
        <td id="op_<%= i + 1 %>_1" data-id="<%= (i * 11) + 1 %>_<%= (11 * (i * 11 + 1)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 1).result %></td>
        <td id="op_<%= i + 1 %>_2" data-id="<%= (i * 11) + 2 %>_<%= (11 * (i * 11 + 2)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 2).result %></td>
        <td id="op_<%= i + 1 %>_3" data-id="<%= (i * 11) + 3 %>_<%= (11 * (i * 11 + 3)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 3).result %></td>
        <td id="op_<%= i + 1 %>_4" data-id="<%= (i * 11) + 4 %>_<%= (11 * (i * 11 + 4)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 4).result %></td>
        <td id="op_<%= i + 1 %>_5" data-id="<%= (i * 11) + 5 %>_<%= (11 * (i * 11 + 5)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 5).result %></td>
        <td id="op_<%= i + 1 %>_6" data-id="<%= (i * 11) + 6 %>_<%= (11 * (i * 11 + 6)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 6).result %></td>
        <td id="op_<%= i + 1 %>_7" data-id="<%= (i * 11) + 7 %>_<%= (11 * (i * 11 + 7)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 7).result %></td>
        <td id="op_<%= i + 1 %>_8" data-id="<%= (i * 11) + 8 %>_<%= (11 * (i * 11 + 8)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 8).result %></td>
        <td id="op_<%= i + 1 %>_9" data-id="<%= (i * 11) + 9 %>_<%= (11 * (i * 11 + 9)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 9).result %></td>
        <td id="op_<%= i + 1 %>_10" data-id="<%= (i * 11) + 10 %>_<%= (11 * (i * 11 + 10)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 10).result %></td>
        <td id="op_<%= i + 1 %>_11" data-id="<%= (i * 11) + 11 %>_<%= (11 * (i * 11 + 11)) - (121 * i + (10 - i)) %>"><%= Result.find((i * 11) + 11).result %></td>

        <%# 勝敗 %>
        <td id="win_<%= i + 1 %>">0</td>
        <td id="lose_<%= i + 1 %>">0</td>
      </tr>
      <% end %>
    </table>
  </div>

  <div class="new-link">
    <%= link_to '棋譜提出ページへ', new_kifu_path %>
  </div>

  <h2>＜棋譜一覧＞</h2>

  <div class="kifu-lists">
    <% @kifus.each do |kifu| %>
      <div class="one-kifu">

        <%# 日付 %>
        <span class="date">
          <%= kifu.date %>
        </span>

        <span class="card">

          <span class="winorlose">
            <% if kifu.result_id == 2 %>
              ○
            <% elsif kifu.result_id == 3 %>
              ●
            <% end %>
            </span>

          <%# 先手 %>
          <span class="sente">
            <%= kifu.sente.name %>
          </span>

          vs

          <%# 後手 %>
          <span class="gote">
            <%= kifu.gote.name %>
          </span>

          <span class="winorlose">
            <% if kifu.result_id == 3 %>
              ○
            <% elsif kifu.result_id == 2 %>
              ●
            <% elsif kifu.result_id == 4 %>
              千
            <% elsif kifu.result_id == 5 %>
              持
            <% end %>
            </span>

        </span>

        <%# 棋譜リンク %>
        <span class="kifu-page">
          <%= link_to '棋譜を見る', kifu_path(kifu.id)  %>
        </span>

      </div>
    <% end %>
  </div>

  <div class="member-list">
    <h2 class="member-list-title">【対局者紹介】</h2>
    <table border="2" bordercolor="black" style="border-collapse: collapse" class="member-table">

      <tr class="member-info">
        <th class="member-title">対局者</th>
        <th class="account-title">アカウント</th>
        <th class="achievement-title">実績</th>
      </tr>

      <% @members.each do |member| %>
      <tr class="member-introduction">
        <td class="member"><%= member.name %></td>
        <td class="account"><%= member.account %></td>
        <td class="achievement"><%= member.achievement %></td>
      </tr>
      <% end %>

    </table>
    </div>
  </div>
</div>